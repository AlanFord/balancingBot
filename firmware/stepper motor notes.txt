bot notes

Understanding the Stepper Motor Control

>>>Timer Initialization
The timer is used to generate an interrupt at a fixed frequency.
This is performed by the initialize_timer() routine.  The OCR2A register is set
to a value of 39, representing 20us.

>>>Interrupt Servicing
Servicing the timer interrupt is performed by ISR(TIMER2_COMPA_vect).
"throttle_counter_left_motor" is incremented each time the interrupt routine is
called until throttle_counter_left_motor exceeds throttle_left_motor_memory, at
which time throttle_counter_left_motor is reset to 0 and throttle_left_motor_memory
is updated to a new value copied from throttle_left_motor.  throttle_left_motor is
set in the main loop based on the motor control calculations.  On the next execution
of ISR throttle_counter_left_motor is incremented to "1".  This triggers the ISR
to set output D2 to "high", causing the motor to step.  On the next execution of the
ISR throttle_counter_left_motor is incremented to "2" and the output D2 is set to
"low", completing the stepper control pulse of 20us.  Subsequent calls to the ISR
increment throttle_counter_left_motor until it exceeds throttle_left_motor_memory
again and the cycle is restarted.

This process indicates that the stepper period is proportional to the value 
read from throttle_left_motor.  This also implies that the stepper frequency is 
proportional to the inverse of throttle_left_motor.  The fastest stepper pulse
frequency is 1/(20us * 2), or 1/40us, or 25,000 pulse per second.

>>>Angle Calculations




>>>PID Controller Calculations
The input to the PID controller calculations is 
	angle_gyro, the tilt angle in degrees from the gyro
	self_balance_pid_setpoint, a self-adjusted setpoint reflecting no motion, forward or backward
	pid_setpoint, used to force a lean forward or backward, to instigate movement

>>>Motor Control Calculations
The motor control calculations start with the "pid_output" generated by the pid
controller calculations.  "turning_speed" is added or subtracted, as needed, to 
implement a left or right turn.  Forward and backward motion is effected by 
adjusting the pid_setpoint.

At this point, the motor pulse calculations must be performed.  While the variables
"pid_output_left" and "pid_output_right" are used as both inputs to and outputs from
the motor pulse calculations, the meaning of the variables change once the
calculations are performed.
	Transforming pid_output_left -> pid_output_left
	Transforming pid_output_left -> left motor (# of 20us increments in motor period)
	left_motor -> throttle_left_motor (# of 20us increments in motor period)